#N canvas 160 37 1280 682 10;
#X declare -stdpath mrpeach;
#X obj 245 365 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X text 190 363 (on/off);
#X obj 611 134 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X text 630 133 (on/off);
#X obj 183 348 loadbang;
#X obj 611 111 loadbang;
#X obj 52 392 karmaFiddle;
#X obj 368 160 karmaAubio;
#X obj 54 163 karmaBalance;
#X obj 190 153 karmaAudioOut;
#X obj 826 292 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 291 22 karmaDSP;
#X obj 54 20 cnv 15 220 80 empty empty empty 20 12 0 14 -191407 -66577
0;
#X text 65 45 Make sure to run this with;
#X text 64 77 Needs pd-Aubio 0.3 or later.;
#X text 64 27 :: karmaSoundAnalyser ::;
#X text 64 61 Pd-Vanilla 0.47-0-64bit or later.;
#X text 936 154 Use either [karmaOSCNative] or [karmaOSCMrPeach];
#X text 935 183 karmaOSCMrPeach performs better but needs MrPeach libs.
;
#X obj 822 407 karmaNotes;
#X obj 819 133 karmaMetronom;
#X obj 368 454 km_osc_format /aubio/attack;
#X text 935 169 Note: Also open km_osc_format.pd and change accordingly.
;
#X obj 93 279 km_osc_format /balance/ampR;
#X obj 54 300 km_osc_format /balance/ampL;
#X obj 132 258 km_osc_format /balance/pan;
#X obj 489 366 km_osc_format /aubio/isQuiet;
#X obj 459 388 km_osc_format /aubio/isPlaying;
#X obj 398 432 km_osc_format /aubio/tempo;
#X obj 428 410 km_osc_format /aubio/tempoAlt;
#X obj 519 345 km_osc_format /aubio/pitch;
#X obj 550 324 km_osc_format /aubio/zcr;
#X obj 611 284 km_osc_format /aubio/steadyState;
#X obj 580 304 km_osc_format /aubio/transients;
#X obj 245 518 km_osc_format /fiddle/silence;
#X obj 206 539 km_osc_format /fiddle/rawAmp;
#X obj 167 561 km_osc_format /fiddle/amp;
#X obj 129 582 km_osc_format /fiddle/rawPitch;
#X obj 90 603 km_osc_format /fiddle/pitch;
#X obj 52 624 km_osc_format /fiddle/attack;
#X obj 894 243 km_osc_format /metronom/BPM;
#X obj 869 267 km_osc_format /metronom/cycles;
#X obj 844 291 km_osc_format /metronom/accent;
#X obj 826 314 km_osc_format /metronom/tick;
#X obj 819 337 km_osc_format /metronom/tickNum;
#X obj 935 28 karmaOSCMrPeach;
#X obj 873 627 km_osc_format /notes/1 \$2 \$3 \$4;
#X obj 54 140 r~ L;
#X obj 132 140 r~ R;
#X obj 190 129 r~ L;
#X obj 265 129 r~ R;
#X obj 367 22 cnv 15 140 80 empty empty empty 20 12 0 14 -191407 -66577
0;
#X text 376 26 :: AUDIO SOURCE ::;
#X obj 376 78 s~ L;
#X obj 410 78 s~ R;
#X obj 368 137 r~ L;
#X obj 489 137 r~ R;
#X obj 381 324 s aubioTempo;
#X obj 819 106 r aubioTempo;
#X obj 52 364 r~ L;
#X obj 148 365 r~ R;
#X obj 822 380 r~ L;
#X obj 898 381 r~ R;
#X obj 890 605 km_osc_format /notes/2 \$2 \$3 \$4;
#X obj 907 583 km_osc_format /notes/3 \$2 \$3 \$4;
#X obj 924 561 km_osc_format /notes/4 \$2 \$3 \$4;
#X obj 941 539 km_osc_format /notes/5 \$2 \$3 \$4;
#X obj 975 495 km_osc_format /notes/7 \$2 \$3 \$4;
#X obj 958 517 km_osc_format /notes/6 \$2 \$3 \$4;
#X obj 528 36 tabread4~;
#X obj 376 47 r~ test;
#X obj 123 890 hip~ 5;
#X text 182 892 high pass filter to cut DC;
#N canvas 0 22 450 300 (subpatch) 0;
#X array sample-table 44104 float 0;
#X coords 0 1.02 44103 -1.02 200 130 1;
#X restore 671 693 graph;
#X obj 123 858 tabread4~ sample-table;
#X obj 123 823 line~;
#X obj 123 774 * 441;
#X floatatom 123 720 0 0 100 0 - - -;
#X obj 123 798 pack 0 100;
#X text 233 684 SCRATCH MACHINE;
#X text 158 721 <-- read point in 100ths of a second;
#X text 180 774 convert to SAMPLES (441 samples in 0.01 sec);
#X obj 491 908 loadbang;
#X text 332 847 read from the table;
#X text 323 865 (the input is the index in samples);
#X text 677 846 (one second plus three extra;
#X text 679 865 for 4-point interpolation);
#X text 471 977 message to read a soundfile into the table (automatically
sent when you load this patch by the "loadbang" object.);
#X text 170 823 convert smoothly to audio signal;
#X text 170 735 (range is 0-100.) YOU ONLY HEAR OUTPUT;
#X text 171 751 WHEN THIS IS 0-100 AND ACTIVELY CHANGING.;
#X text 670 824 --- 44103 samples ---;
#X msg 491 932 read ../sound/voice.wav sample-table;
#X obj 491 957 soundfiler;
#X obj 122 922 output~;
#X obj 222 929 s~ test;
#X obj 382 689 line;
#X obj 465 720 metrum 200 1;
#X obj 123 688 drunk 100 10;
#X msg 438 689 \$1 200;
#X connect 0 0 6 2;
#X connect 2 0 7 2;
#X connect 4 0 0 0;
#X connect 5 0 2 0;
#X connect 6 0 39 0;
#X connect 6 1 38 0;
#X connect 6 2 37 0;
#X connect 6 3 36 0;
#X connect 6 4 35 0;
#X connect 6 5 34 0;
#X connect 7 0 21 0;
#X connect 7 1 28 0;
#X connect 7 1 57 0;
#X connect 7 2 29 0;
#X connect 7 3 27 0;
#X connect 7 4 26 0;
#X connect 7 5 30 0;
#X connect 7 6 31 0;
#X connect 7 7 33 0;
#X connect 7 8 32 0;
#X connect 8 0 24 0;
#X connect 8 1 23 0;
#X connect 8 2 25 0;
#X connect 10 0 43 0;
#X connect 19 3 46 0;
#X connect 19 4 63 0;
#X connect 19 5 64 0;
#X connect 19 6 65 0;
#X connect 19 7 66 0;
#X connect 19 8 68 0;
#X connect 19 9 67 0;
#X connect 20 0 10 0;
#X connect 20 0 44 0;
#X connect 20 1 42 0;
#X connect 20 2 41 0;
#X connect 20 3 40 0;
#X connect 47 0 8 0;
#X connect 48 0 8 1;
#X connect 49 0 9 0;
#X connect 50 0 9 1;
#X connect 55 0 7 0;
#X connect 56 0 7 1;
#X connect 58 0 20 0;
#X connect 59 0 6 0;
#X connect 60 0 6 1;
#X connect 61 0 19 0;
#X connect 62 0 19 1;
#X connect 70 0 53 0;
#X connect 70 0 54 0;
#X connect 71 0 94 0;
#X connect 71 0 94 1;
#X connect 71 0 95 0;
#X connect 74 0 71 0;
#X connect 75 0 74 0;
#X connect 76 0 78 0;
#X connect 77 0 76 0;
#X connect 78 0 75 0;
#X connect 82 0 92 0;
#X connect 92 0 93 0;
#X connect 96 0 77 0;
#X connect 97 0 98 0;
#X connect 98 0 99 0;
#X connect 99 0 96 0;
