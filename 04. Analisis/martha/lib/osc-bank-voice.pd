#N canvas 179 23 960 779 10;
#X obj 20 534 osc~;
#X obj 20 634 *~;
#X obj 515 200 t b b;
#X msg 515 261 -1;
#X obj 686 267 f \$1;
#X obj 206 566 *~;
#X obj 206 589 *~;
#X obj 206 453 sqrt;
#X text 280 535 Using a quartic curve for more natural sounding attack
and release \, as in D07.additive.pd, f 16;
#N canvas 297 37 723 685 gliss-traj 0;
#X obj 37 28 inlet;
#X obj 37 50 t b b b;
#X obj 37 575 outlet~;
#X obj 37 459 pack f f f;
#X msg 37 481 0 \, \$1 \$2 \$3;
#X obj 229 545 inlet;
#X msg 229 567 stop \, 0;
#X text 147 608 Stop the trajectory if this voice is killed;
#X obj 37 531 vline~;
#X obj 37 416 / 100;
#X obj 538 289 t b f;
#X obj 498 267 -;
#X obj 498 289 + 1;
#X obj 277 280 t b f;
#X obj 237 258 -;
#X obj 237 280 + 1;
#X obj 281 438 t b f;
#X obj 226 411 -;
#X obj 226 472 + 1;
#X obj 226 450 * 100;
#X obj 312 464 * 100;
#N canvas 118 71 450 300 get-gliss-dur-range 0;
#X obj 73 49 r \$2-martha-gliss-dur-range;
#X obj 130 117 unpack f f;
#X obj 73 75 t l l;
#X obj 42 116 unpack f f;
#X obj 42 138 max;
#X obj 130 139 min;
#X obj 42 160 outlet;
#X obj 130 163 outlet;
#X connect 0 0 2 0;
#X connect 1 0 5 0;
#X connect 1 1 5 1;
#X connect 2 0 3 0;
#X connect 2 1 1 0;
#X connect 3 0 4 0;
#X connect 3 1 4 1;
#X connect 4 0 6 0;
#X connect 5 0 7 0;
#X restore 237 231 pd get-gliss-dur-range;
#N canvas 200 229 450 300 get-gliss-onset-delay-range 0;
#X obj 130 117 unpack f f;
#X obj 73 75 t l l;
#X obj 42 116 unpack f f;
#X obj 42 138 max;
#X obj 130 139 min;
#X obj 42 160 outlet;
#X obj 130 163 outlet;
#X obj 73 49 r \$2-martha-gliss-onset-delay-range;
#X connect 0 0 4 0;
#X connect 0 1 4 1;
#X connect 1 0 2 0;
#X connect 1 1 0 0;
#X connect 2 0 3 0;
#X connect 2 1 3 1;
#X connect 3 0 5 0;
#X connect 4 0 6 0;
#X connect 7 0 1 0;
#X restore 498 242 pd get-gliss-onset-delay-range;
#N canvas 166 242 450 300 get-gliss-range 0;
#X obj 130 117 unpack f f;
#X obj 73 75 t l l;
#X obj 42 116 unpack f f;
#X obj 42 138 max;
#X obj 130 139 min;
#X obj 42 160 outlet;
#X obj 131 163 outlet;
#X obj 80 49 r \$2-martha-gliss-range;
#X connect 0 0 4 0;
#X connect 0 1 4 1;
#X connect 1 0 2 0;
#X connect 1 1 0 0;
#X connect 2 0 3 0;
#X connect 2 1 3 1;
#X connect 3 0 5 0;
#X connect 4 0 6 0;
#X connect 7 0 1 0;
#X restore 226 385 pd get-gliss-range;
#X obj 37 394 +;
#X obj 37 369 random;
#X obj 427 327 random;
#X obj 427 349 +;
#X obj 160 318 random;
#X obj 160 342 +;
#X connect 0 0 1 0;
#X connect 1 0 25 0;
#X connect 1 1 28 0;
#X connect 1 2 26 0;
#X connect 3 0 4 0;
#X connect 4 0 8 0;
#X connect 5 0 6 0;
#X connect 6 0 8 0;
#X connect 8 0 2 0;
#X connect 9 0 3 0;
#X connect 10 0 11 0;
#X connect 10 1 11 1;
#X connect 10 1 27 1;
#X connect 11 0 12 0;
#X connect 12 0 26 1;
#X connect 13 0 14 0;
#X connect 13 1 14 1;
#X connect 13 1 29 1;
#X connect 14 0 15 0;
#X connect 15 0 28 1;
#X connect 16 0 17 0;
#X connect 16 1 17 1;
#X connect 16 1 20 0;
#X connect 17 0 19 0;
#X connect 18 0 25 1;
#X connect 19 0 18 0;
#X connect 20 0 24 1;
#X connect 21 0 14 0;
#X connect 21 1 13 0;
#X connect 22 0 11 0;
#X connect 22 1 10 0;
#X connect 23 0 17 0;
#X connect 23 1 16 0;
#X connect 24 0 9 0;
#X connect 25 0 24 0;
#X connect 26 0 27 0;
#X connect 27 0 3 2;
#X connect 28 0 29 0;
#X connect 29 0 3 1;
#X restore 84 404 pd gliss-traj;
#X obj 20 446 +~;
#N canvas 0 22 776 503 tremolo 0;
#X obj 93 88 inlet~;
#X obj 93 403 outlet~;
#X obj 616 106 inlet;
#X obj 249 317 osc~;
#X obj 249 339 +~ 1;
#X obj 249 361 *~ 0.5;
#X obj 93 304 *~;
#X obj 616 128 t b b;
#X msg 320 283 0;
#X text 360 287 Set phase to beginning of cosine cycle at the onset
so it's a 1 ready to drop to 0;
#X obj 369 136 t b f;
#X obj 329 114 -;
#X obj 396 161 * 100;
#X obj 249 284 / 100;
#X obj 329 136 * 100;
#X obj 329 158 + 1;
#N canvas 118 71 450 300 get-tremolo-rate-range 0;
#X obj 130 117 unpack f f;
#X obj 73 75 t l l;
#X obj 42 116 unpack f f;
#X obj 42 138 max;
#X obj 130 139 min;
#X obj 42 160 outlet;
#X obj 130 163 outlet;
#X obj 73 49 r \$2-martha-tremolo-rate-range;
#X connect 0 0 4 0;
#X connect 0 1 4 1;
#X connect 1 0 2 0;
#X connect 1 1 0 0;
#X connect 2 0 3 0;
#X connect 2 1 3 1;
#X connect 3 0 5 0;
#X connect 4 0 6 0;
#X connect 7 0 1 0;
#X restore 328 51 pd get-tremolo-rate-range;
#X floatatom 484 88 10 0 0 0 - - -, f 10;
#X floatatom 394 88 10 0 0 0 - - -, f 10;
#X obj 249 220 random;
#X obj 249 262 +;
#X connect 0 0 6 0;
#X connect 2 0 7 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 6 1;
#X connect 6 0 1 0;
#X connect 7 0 19 0;
#X connect 7 1 8 0;
#X connect 8 0 3 1;
#X connect 10 0 11 0;
#X connect 10 1 11 1;
#X connect 10 1 12 0;
#X connect 11 0 14 0;
#X connect 12 0 20 1;
#X connect 13 0 3 0;
#X connect 14 0 15 0;
#X connect 15 0 19 1;
#X connect 16 0 11 0;
#X connect 16 0 18 0;
#X connect 16 1 10 0;
#X connect 16 1 17 0;
#X connect 19 0 20 0;
#X connect 20 0 13 0;
#X restore 206 633 pd tremolo;
#X obj 20 468 mtof~;
#X obj 20 326 ftom~;
#X obj 206 525 vline~;
#X msg 444 375 0 \$1;
#X obj 602 177 + 50;
#N canvas 160 219 781 466 get-attack-time 0;
#X obj 289 83 t b f;
#X obj 249 61 -;
#X obj 249 83 + 1;
#X obj 139 170 + 5;
#X obj 146 63 inlet;
#X obj 133 120 random 100;
#X obj 43 47 inlet~;
#X obj 50 296 *~;
#X obj 39 368 outlet~;
#X obj 139 221 vline~;
#X obj 139 243 *~;
#X obj 139 265 *~;
#X msg 139 192 0 \, 1 \$1;
#N canvas 118 71 450 300 get-attack-time-range 0;
#X obj 130 117 unpack f f;
#X obj 73 75 t l l;
#X obj 42 116 unpack f f;
#X obj 42 138 max;
#X obj 130 139 min;
#X obj 42 160 outlet;
#X obj 131 163 outlet;
#X obj 80 49 r \$2-martha-attack-time-range;
#X connect 0 0 4 0;
#X connect 0 1 4 1;
#X connect 1 0 2 0;
#X connect 1 1 0 0;
#X connect 2 0 3 0;
#X connect 2 1 3 1;
#X connect 3 0 5 0;
#X connect 4 0 6 0;
#X connect 7 0 1 0;
#X restore 249 24 pd get-attack-time-range;
#X floatatom 450 56 10 0 0 0 - - -, f 10;
#X floatatom 360 56 10 0 0 0 - - -, f 10;
#X connect 0 0 1 0;
#X connect 0 1 1 1;
#X connect 0 1 3 1;
#X connect 1 0 2 0;
#X connect 2 0 5 1;
#X connect 3 0 12 0;
#X connect 4 0 5 0;
#X connect 5 0 3 0;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 9 0 10 0;
#X connect 9 0 10 1;
#X connect 10 0 11 0;
#X connect 10 0 11 1;
#X connect 11 0 7 1;
#X connect 12 0 9 0;
#X connect 13 0 1 0;
#X connect 13 0 15 0;
#X connect 13 1 0 0;
#X connect 13 1 14 0;
#X restore 20 674 pd get-attack-time;
#N canvas 0 22 597 308 get-release-time 0;
#X obj 233 107 t b f;
#X obj 193 85 -;
#X obj 193 107 + 1;
#X obj 90 219 outlet;
#X obj 90 87 inlet;
#X obj 90 167 + 500;
#X obj 90 145 random 1000;
#N canvas 118 71 450 300 get-release-time-range 0;
#X obj 130 117 unpack f f;
#X obj 73 75 t l l;
#X obj 42 116 unpack f f;
#X obj 42 138 max;
#X obj 130 139 min;
#X obj 42 160 outlet;
#X obj 131 163 outlet;
#X obj 80 49 r \$2-martha-release-time-range;
#X connect 0 0 4 0;
#X connect 0 1 4 1;
#X connect 1 0 2 0;
#X connect 1 1 0 0;
#X connect 2 0 3 0;
#X connect 2 1 3 1;
#X connect 3 0 5 0;
#X connect 4 0 6 0;
#X connect 7 0 1 0;
#X restore 193 52 pd get-release-time-range;
#X floatatom 413 96 10 0 0 0 - - -, f 10;
#X floatatom 323 96 10 0 0 0 - - -, f 10;
#X connect 0 0 1 0;
#X connect 0 1 1 1;
#X connect 0 1 5 1;
#X connect 1 0 2 0;
#X connect 2 0 6 1;
#X connect 4 0 6 0;
#X connect 5 0 3 0;
#X connect 6 0 5 0;
#X connect 7 0 1 0;
#X connect 7 0 9 0;
#X connect 7 1 0 0;
#X connect 7 1 8 0;
#X restore 444 340 pd get-release-time;
#X obj 254 227 t b f b;
#X obj 417 105 t b b;
#X obj 65 114 swap 1;
#X obj 65 135 -;
#X obj 20 166 spigot;
#N canvas 86 61 866 635 freq-new 1;
#X obj 112 329 swap 1;
#X obj 112 350 -;
#X obj 79 561 outlet;
#X text 379 113 if pitchify is OFF \, simply pass thru the new frequency
;
#X obj 164 118 spigot;
#X obj 79 375 spigot;
#X obj 297 297 mtof;
#X obj 297 327 *;
#X obj 371 452 f;
#X obj 297 482 f;
#X obj 297 394 moses 12000;
#X text 347 305 If the harmonic ends up being over 12kHz \, forget
the pitch scheme and just go with the regular frequency., f 26;
#X obj 485 546 outlet;
#X msg 437 493 1;
#X text 532 467 amp scalar so that harmonics are 1/N amplitude. cuts
annoying high freqs being too loud, f 20;
#X obj 79 396 t f b;
#X obj 485 419 t b f;
#X msg 485 440 1;
#X obj 485 471 /;
#X obj 530 445 pow 0.5;
#X obj 79 31 r \$2-martha-freq-new-\$1;
#X obj 297 275 tabread \$2-martha-pitchify-pitches;
#X obj 79 52 t f f;
#X obj 371 416 t b b;
#X text 380 46 if pitchify switch is ON \, find this abstraction's
pitch from the table of 8 values. find out which harmonic it is and
tune it;
#X obj 197 88 r \$2-martha-pitch-switch;
#X obj 112 309 r \$2-martha-pitch-switch;
#X obj 357 239 + 1;
#X obj 297 217 random 8;
#X obj 164 139 t b b f;
#X obj 357 217 random 10;
#X text 356 162 Pick a random pitch from the set of 8 MIDI pitches
\, then pick a random harmonic 1-10, f 42;
#X connect 0 0 1 0;
#X connect 0 1 1 1;
#X connect 1 0 5 1;
#X connect 4 0 29 0;
#X connect 5 0 15 0;
#X connect 6 0 7 0;
#X connect 7 0 10 0;
#X connect 8 0 9 0;
#X connect 9 0 2 0;
#X connect 10 0 9 0;
#X connect 10 1 23 0;
#X connect 13 0 12 0;
#X connect 15 0 2 0;
#X connect 15 1 13 0;
#X connect 16 0 17 0;
#X connect 16 1 19 0;
#X connect 17 0 18 0;
#X connect 18 0 12 0;
#X connect 19 0 18 1;
#X connect 20 0 22 0;
#X connect 21 0 6 0;
#X connect 22 0 5 0;
#X connect 22 1 4 0;
#X connect 23 0 8 0;
#X connect 23 1 13 0;
#X connect 25 0 4 1;
#X connect 26 0 0 0;
#X connect 27 0 7 1;
#X connect 27 0 16 0;
#X connect 28 0 21 0;
#X connect 29 0 28 0;
#X connect 29 1 30 0;
#X connect 29 2 9 1;
#X connect 30 0 27 0;
#X restore 84 197 pd freq-new;
#X obj 206 425 sqrt;
#X text 539 109 Ramp the volume down over a random amount of time within
the specified limits \, and just after that amount of time \, update
the voice assignment table to indicate this voice is free (-1).;
#X text 518 19 \$1: voice ID number;
#X text 518 39 \$2: dollar-zero of the parent patch;
#X obj 20 40 r \$2-martha-freq-update-\$1;
#X obj 417 83 r \$2-martha-kill-\$1;
#X obj 515 290 tabwrite \$2-martha-voiceAssts;
#X obj 206 371 r \$2-martha-amp-update-\$1;
#X obj 20 719 throw~ \$2-martha-sum-bus;
#X obj 254 197 r \$2-martha-amp-new-\$1;
#X obj 753 213 r \$2-martha-killall;
#X obj 753 235 t b b;
#X obj 753 257 delay 300;
#X msg 801 281 0 250;
#X obj 20 370 +~;
#X obj 96 286 r \$2-martha-transpo;
#X obj 96 308 pack f 40;
#X obj 96 330 line~;
#X obj 84 223 t b f;
#X obj 20 277 sig~;
#X obj 206 487 pack f 2;
#X obj 65 94 r \$2-martha-pitch-switch;
#X obj 515 178 delay;
#X obj 206 404 *;
#X connect 0 0 1 0;
#X connect 1 0 17 0;
#X connect 2 0 3 0;
#X connect 2 1 4 0;
#X connect 2 1 9 1;
#X connect 3 0 31 0;
#X connect 4 0 31 1;
#X connect 5 0 6 0;
#X connect 5 0 6 1;
#X connect 6 0 11 0;
#X connect 7 0 45 0;
#X connect 9 0 10 1;
#X connect 10 0 12 0;
#X connect 11 0 1 1;
#X connect 12 0 0 0;
#X connect 13 0 39 0;
#X connect 14 0 5 0;
#X connect 14 0 5 1;
#X connect 15 0 14 0;
#X connect 16 0 47 1;
#X connect 17 0 33 0;
#X connect 18 0 15 0;
#X connect 18 0 16 0;
#X connect 19 0 11 1;
#X connect 19 1 48 0;
#X connect 19 2 17 1;
#X connect 20 0 47 0;
#X connect 20 1 18 0;
#X connect 21 0 22 0;
#X connect 21 1 22 1;
#X connect 22 0 23 1;
#X connect 23 0 44 0;
#X connect 24 0 43 0;
#X connect 24 1 48 1;
#X connect 25 0 7 0;
#X connect 29 0 23 0;
#X connect 30 0 20 0;
#X connect 32 0 48 0;
#X connect 34 0 19 0;
#X connect 35 0 36 0;
#X connect 36 0 37 0;
#X connect 36 1 38 0;
#X connect 37 0 2 0;
#X connect 38 0 14 0;
#X connect 39 0 10 0;
#X connect 40 0 41 0;
#X connect 41 0 42 0;
#X connect 42 0 39 1;
#X connect 43 0 9 0;
#X connect 43 1 44 0;
#X connect 44 0 13 0;
#X connect 45 0 14 0;
#X connect 46 0 21 0;
#X connect 47 0 2 0;
#X connect 48 0 25 0;
