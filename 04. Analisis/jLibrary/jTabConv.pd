#N canvas 88 40 855 768 10;
#X obj 19 17 inlet;
#X obj 432 24 t b b;
#X obj 432 86 +;
#X obj 432 108 - 1;
#N canvas 0 22 450 300 powerOf2GreaterThan 0;
#X obj 92 73 jLog 2;
#X obj 92 104 int;
#X obj 92 126 + 1;
#X obj 92 158 swap 2;
#X obj 92 180 pow;
#X obj 92 35 inlet;
#X obj 92 225 outlet;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 3 1 4 1;
#X connect 4 0 6 0;
#X connect 5 0 0 0;
#X restore 432 184 pd powerOf2GreaterThan;
#X floatatom 522 233 15 0 0 0 - - -, f 15;
#X text 546 51 get array lengths;
#X text 581 184 calc blocksize = nearest ^2 > size y;
#X obj 432 130 t f f;
#X obj 16 304 tabwrite~ \$0-X-re;
#X obj 26 324 tabwrite~ \$0-X-im;
#X obj 19 183 t b b;
#X obj 149 183 t b b;
#X obj 146 304 tabwrite~ \$0-H-re;
#X obj 156 324 tabwrite~ \$0-H-im;
#X obj 46 262 rfft~;
#X obj 176 262 rfft~;
#X obj 17 401 tab_complex_mul \$0-X-re \$0-X-im \$0-H-re \$0-H-im \$0-XH-re
\$0-XH-im;
#X obj 44 582 rifft~;
#X obj 17 493 t b b b;
#X obj 44 522 tabplay~ \$0-XH-re;
#X obj 77 562 tabplay~ \$0-XH-im;
#X obj 19 111 t b b;
#X obj 46 222 tabplay~ \$1;
#X obj 176 222 tabplay~ \$2;
#X obj 17 664 tabwrite~ \$3;
#X obj 44 627 /~;
#X obj 59 604 r \$0-blocksize;
#X obj 522 251 s \$0-blocksize;
#X obj 665 223 pack f \$0;
#X msg 665 245 \; \$2-X-re resize \$1 \; \$2-X-im resize \$1 \; \$2-H-re
resize \$1 \; \$2-H-im resize \$1 \; \$2-XH-re resize \$1 \; \$2-XH-im
resize \$1 \;;
#X text 662 342 resize calculation arrays;
#X text 74 623 ifft~ gain normalisation \; / by blocksize;
#X text 41 377 complex multiply tables X by H;
#X text 103 490 inverse fft~;
#X text 104 137 perform fft~;
#X obj 67 19 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 356 235 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 19 39 t b b b;
#X msg 690 638 \; \$2-X-re resize 1 \; \$2-X-im resize 1 \; \$2-H-re
resize 1 \; \$2-H-im resize 1 \; \$2-XH-re resize 1 \; \$2-XH-im resize
1 \;;
#X obj 690 596 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 690 616 pack f \$0;
#X text 429 329 run patch at 2048 speed!;
#X text 298 204 switch~ off after computation;
#X obj 143 711 outlet;
#X obj 143 541 t b b;
#X text 187 711 bang on finish;
#X text 687 562 resize arrays to 1 before patch save, f 18;
#N canvas 0 22 646 483 arrayTablesAreInHere 0;
#N canvas 0 22 450 278 (subpatch) 0;
#X array \$0-X-re 1 float 2;
#X coords 0 1 1 -1 200 140 1 0 0;
#X restore 11 85 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X array \$0-X-im 1 float 2;
#X coords 0 1 1 -1 200 140 1 0 0;
#X restore 11 245 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X array \$0-H-re 1 float 2;
#X coords 0 1 1 -1 200 140 1 0 0;
#X restore 221 85 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X array \$0-H-im 1 float 2;
#X coords 0 1 1 -1 200 140 1 0 0;
#X restore 221 245 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X array \$0-XH-re 1 float 2;
#X coords 0 1 1 -1 200 140 1 0 0;
#X restore 431 85 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X array \$0-XH-im 1 float 2;
#X coords 0 1 1 -1 200 140 1 0 0;
#X restore 431 245 graph;
#X restore 395 547 pd arrayTablesAreInHere;
#X obj 432 311 switch~;
#X text 483 110 calc and set dest array \; size y = size x + size h
- 1;
#X msg 432 290 set \$1 1 2048;
#X obj 729 17 loadbang;
#X msg 729 39 \; pd dsp 1;
#X obj 432 44 jArraySize \$1;
#X obj 442 64 jArraySize \$2;
#X obj 459 152 jArraySize \$3;
#X obj 729 88 import iem_tab;
#X connect 0 0 38 0;
#X connect 1 0 54 0;
#X connect 1 1 55 0;
#X connect 2 0 3 0;
#X connect 3 0 8 0;
#X connect 4 0 5 0;
#X connect 4 0 28 0;
#X connect 4 0 29 0;
#X connect 4 0 51 0;
#X connect 8 0 4 0;
#X connect 8 1 56 0;
#X connect 11 0 9 0;
#X connect 11 0 10 0;
#X connect 11 1 23 0;
#X connect 12 0 13 0;
#X connect 12 0 14 0;
#X connect 12 1 24 0;
#X connect 15 0 9 0;
#X connect 15 1 10 0;
#X connect 16 0 13 0;
#X connect 16 1 14 0;
#X connect 17 0 19 0;
#X connect 18 0 26 0;
#X connect 19 0 25 0;
#X connect 19 1 20 0;
#X connect 19 2 21 0;
#X connect 20 0 18 0;
#X connect 20 1 45 0;
#X connect 21 0 18 1;
#X connect 22 0 11 0;
#X connect 22 1 12 0;
#X connect 23 0 15 0;
#X connect 23 1 17 0;
#X connect 24 0 16 0;
#X connect 26 0 25 0;
#X connect 27 0 26 1;
#X connect 29 0 30 0;
#X connect 36 0 38 0;
#X connect 37 0 49 0;
#X connect 38 0 22 0;
#X connect 38 1 1 0;
#X connect 38 2 37 0;
#X connect 40 0 41 0;
#X connect 41 0 39 0;
#X connect 45 0 44 0;
#X connect 45 1 37 0;
#X connect 51 0 49 0;
#X connect 52 0 53 0;
#X connect 54 0 2 0;
#X connect 55 0 2 1;
