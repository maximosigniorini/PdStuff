#N canvas 0 0 1009 698 10;
#X floatatom 590 -329 0 0 0 0 - - -;
#X obj 504 -107 f;
#X obj 561 -116 + 1;
#X floatatom 503 -63 0 0 0 0 - - -;
#X msg 508 -344 0;
#X obj 620 -305 s tempo;
#X obj 561 -93 mod 32;
#X obj 157 103 f;
#X obj 220 77 + 1;
#X obj 211 43 select 0;
#X floatatom 192 138 0 0 0 0 - - -;
#X obj 194 177 s bar;
#X obj 220 112 mod 120;
#X obj 328 -422 inlet;
#X msg 328 -391 bang;
#X obj 505 -421 inlet;
#X msg 505 -371 bang;
#X obj 590 -423 inlet;
#X text 596 -255 but you can change speed with right inlet;
#X text 398 -114 storage box for a;
#X text 363 -104 floating point variable;
#X text 334 -91 this keeps track of the beat;
#X text 372 -65 you can see it here >;
#X msg 481 -145 0;
#X text 312 -148 on start reset beat to zero;
#X text 590 -120 every time the metro bangs the float starage;
#X text 610 -107 we add one to the float output;
#X text 615 -95 and store it back into the input;
#X text 616 -18 NOTE: we use the right input to avoid feedback!;
#X text 615 -63 the mod command resets the float to zero;
#X text 617 -51 when it reaches 32;
#X text 539 -173 BEAT COUNTER SECTION;
#X text 299 18 BAR COUNTER SECTION;
#X text 274 39 every time the beat is at zero;
#X text 274 51 we want to increase the bar count;
#X text 247 77 every time the metro bangs the float starage;
#X text 267 90 we add one to the float output;
#X text 272 102 and store it back into the input;
#X text 273 179 NOTE: we use the right input to avoid feedback!;
#X text 272 134 the mod command resets the float to zero;
#X text 274 146 when it reaches 120 \, (the track has 120 bars!);
#X text 50 85 storage box for a;
#X text 15 95 floating point variable;
#X text 60 140 you can see it here >;
#X text 17 107 keeps track of the bar;
#X msg 117 48 0;
#X text 4 29 on start reset bar to zero;
#X msg 457 -340 1;
#X text 224 -412 resets bar \, beat;
#X text 215 -399 and starts metro;
#X text 588 -279 < main metro item kicks out a bang every 'n' millisecs
;
#X text 241 -425 START inlet;
#X text 432 -425 STOP inlet;
#X text 423 -414 stops metro;
#X text 29 -338 CLOCK PATCH (abstraction);
#X text 629 -424 TEMPO inlet;
#X obj 624 60 s beat;
#X obj 576 61 outlet;
#X text 668 57 beat value is sent as a outlet;
#X text 667 70 and a virtual 'send' value;
#X text 190 202 note: we arent actually using the bar counter;
#X text 187 216 to trigger anything in this example;
#X obj 524 -278 metro 208;
#X text 596 -266 initial speed is 208 \,;
#X connect 0 0 5 0;
#X connect 0 0 62 1;
#X connect 1 0 2 0;
#X connect 1 0 3 0;
#X connect 2 0 6 0;
#X connect 3 0 9 0;
#X connect 3 0 56 0;
#X connect 3 0 57 0;
#X connect 4 0 62 0;
#X connect 6 0 1 1;
#X connect 7 0 8 0;
#X connect 7 0 10 0;
#X connect 8 0 12 0;
#X connect 9 0 7 0;
#X connect 10 0 11 0;
#X connect 12 0 7 1;
#X connect 13 0 14 0;
#X connect 14 0 23 0;
#X connect 14 0 45 0;
#X connect 14 0 47 0;
#X connect 15 0 16 0;
#X connect 16 0 4 0;
#X connect 17 0 0 0;
#X connect 23 0 1 0;
#X connect 45 0 7 0;
#X connect 47 0 62 0;
#X connect 62 0 1 0;
