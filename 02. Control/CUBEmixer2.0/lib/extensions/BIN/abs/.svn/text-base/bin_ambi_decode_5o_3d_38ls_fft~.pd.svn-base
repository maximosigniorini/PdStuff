#N canvas 24 10 969 669 10;
#X obj 31 535 outlet~;
#X obj 161 534 outlet~;
#X obj 30 35 inlet~;
#X obj 40 35 inlet~;
#X obj 49 35 inlet~;
#X obj 57 35 inlet~;
#X obj 66 35 inlet~;
#X obj 75 35 inlet~;
#X obj 83 35 inlet~;
#X text 186 432 bin_neg_sum;
#X obj 92 35 inlet~;
#X obj 100 35 inlet~;
#X obj 108 35 inlet~;
#X obj 118 35 inlet~;
#X obj 126 35 inlet~;
#X obj 135 35 inlet~;
#X obj 144 35 inlet~;
#X obj 152 35 inlet~;
#X obj 161 35 inlet~;
#X obj 30 431 +~;
#X obj 160 433 -~;
#X obj 169 35 inlet~;
#X obj 177 35 inlet~;
#X obj 186 35 inlet~;
#X obj 194 35 inlet~;
#X obj 203 35 inlet~;
#X obj 212 35 inlet~;
#X obj 221 35 inlet~;
#X obj 230 35 inlet~;
#X obj 238 35 inlet~;
#X text 301 383 1.arg: <float> fftsize = tablesize;
#X obj 447 27 inlet;
#X text 592 50 HRIR_onset in samples;
#X text 602 62 pathname-symbol of HRIR-wav-files;
#X text 289 438 lists of Loudspeaker-index;
#X text 287 451 + LS-angles (elevation + azimuth) in degree;
#X text 34 558 Left ear signal;
#X text 164 558 Right ear signal;
#X text 569 28 ambi order weight list;
#X obj 287 518 del 100;
#X obj 287 640 s \$0-table_init_ready;
#N canvas 71 89 954 718 protect_against_too_early_init_________ 0;
#X obj 46 80 inlet;
#X obj 276 85 inlet;
#X obj 419 82 inlet;
#X obj 776 77 inlet;
#X obj 122 263 gate 0;
#X msg 613 596 1;
#X obj 328 271 gate 0;
#X obj 489 270 gate 0;
#X msg 517 598 0;
#X obj 101 446 gate 1;
#X obj 101 467 t b;
#X msg 101 487 1;
#X obj 330 560 f 0;
#X obj 776 123 del 2;
#X msg 776 145 0;
#X obj 118 363 outlet;
#X obj 359 370 outlet;
#X obj 469 371 outlet;
#X obj 39 364 outlet;
#X text 42 63 ambi_weight;
#X text 275 67 HRIR_onset;
#X text 416 64 HRIR_pathname;
#X text 747 58 after table init;
#X text 765 43 init_bang;
#X obj 330 582 sel 1 0;
#X obj 275 273 f 20;
#X obj 172 82 inlet;
#X text 168 65 mirror_weight;
#X obj 228 271 gate 0;
#X obj 241 368 outlet;
#X obj 175 273 f 50;
#X obj 26 262 any 1 1 1 1 1 1;
#X obj 419 105 symbol;
#X obj 580 80 inlet;
#X obj 632 266 gate 0;
#X obj 663 365 outlet;
#X text 579 62 HRIR_length;
#X obj 579 268 f 256;
#X obj 330 607 t b b b b b;
#X obj 381 241 symbol Diffuse_Kemar_HRIR;
#X connect 0 0 4 0;
#X connect 0 0 9 0;
#X connect 0 0 31 1;
#X connect 1 0 6 0;
#X connect 1 0 9 0;
#X connect 1 0 25 1;
#X connect 2 0 32 0;
#X connect 3 0 5 0;
#X connect 3 0 8 0;
#X connect 3 0 12 0;
#X connect 3 0 13 0;
#X connect 4 0 15 0;
#X connect 5 0 4 1;
#X connect 5 0 6 1;
#X connect 5 0 7 1;
#X connect 5 0 28 1;
#X connect 5 0 34 1;
#X connect 6 0 16 0;
#X connect 7 0 17 0;
#X connect 8 0 9 1;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 11 0 12 1;
#X connect 12 0 24 0;
#X connect 13 0 14 0;
#X connect 14 0 12 1;
#X connect 24 0 38 0;
#X connect 24 1 18 0;
#X connect 25 0 16 0;
#X connect 26 0 9 0;
#X connect 26 0 28 0;
#X connect 26 0 30 1;
#X connect 28 0 29 0;
#X connect 30 0 29 0;
#X connect 31 0 15 0;
#X connect 32 0 7 0;
#X connect 32 0 9 0;
#X connect 32 0 39 1;
#X connect 33 0 34 0;
#X connect 33 0 37 1;
#X connect 33 0 9 0;
#X connect 34 0 35 0;
#X connect 37 0 35 0;
#X connect 38 0 31 0;
#X connect 38 1 30 0;
#X connect 38 2 25 0;
#X connect 38 3 39 0;
#X connect 38 4 37 0;
#X connect 39 0 17 0;
#X restore 442 128 pd protect_against_too_early_init_________;
#X obj 719 128 r \$0-table_init_ready;
#X obj 287 498 bng 15 250 50 0 empty empty empty 0 -6 0 8 -262144 -1
-1;
#X floatatom 484 192 5 0 100 0 - - -;
#X obj 287 544 init_fft_HRIR_fadeout_win \$0 HRIR_fadeout_win \$1;
#X obj 408 327 r \$0-table_init_ready;
#X obj 408 348 del 10;
#X text 579 38 mirror weight list;
#X obj 287 613 init_rect_win \$0_rect_win \$1;
#X text 500 566 real;
#X msg 905 210 1 90 0;
#X obj 712 189 t b b b b b b b b b b b b b b b b;
#X msg 802 457 1 L90e000a.wav;
#X obj 829 434 pack 0 0 0;
#X obj 819 714 pack f s;
#X obj 287 475 loadbang;
#X msg 930 231 2 \$1 0 \, 3 \$1 60 \, 4 \$1 120 \, 5 \$1 180 \, 6 \$1
240 \, 7 \$1 300;
#X msg 918 252 8 \$1 30 \, 9 \$1 90 \, 10 \$1 150 \, 11 \$1 210 \,
12 \$1 270 \, 13 \$1 330;
#X msg 899 273 14 \$1 0 \, 15 \$1 60 \, 16 \$1 120 \, 17 \$1 180 \,
18 \$1 240 \, 19 \$1 300;
#X msg 891 306 20 \$1 30 \, 21 \$1 90 \, 22 \$1 150 \, 23 \$1 210 \,
24 \$1 270 \, 25 \$1 330;
#X msg 884 339 26 \$1 0 \, 27 \$1 60 \, 28 \$1 120 \, 29 \$1 180 \,
30 \$1 240 \, 31 \$1 300;
#X msg 870 373 32 \$1 30 \, 33 \$1 90 \, 34 \$1 150 \, 35 \$1 210 \,
36 \$1 270 \, 37 \$1 330;
#X msg 866 274 11.9;
#X msg 853 307 -11.9;
#X msg 879 252 26.01;
#X msg 840 339 -26.01;
#X msg 892 231 53.98;
#X msg 827 373 -53.98;
#X obj 287 566 create_HRIR_tables \$0 L_HRIR 38 \$1;
#X obj 287 588 create_HRTF_tables \$0 HRTF_re HRTF_im 36 \$1;
#X obj 377 219 pack 1 1 1 1 1 1;
#X text 105 14 36 ambisonic signals;
#X obj 31 338 blockfilter_fft_convolution_36~ \$0 \$0_rect_win HRTF_re
HRTF_im \$1;
#X obj 246 35 inlet~;
#X obj 254 35 inlet~;
#X obj 263 35 inlet~;
#X obj 271 35 inlet~;
#X obj 280 35 inlet~;
#X obj 289 35 inlet~;
#X obj 298 35 inlet~;
#X obj 307 35 inlet~;
#X obj 315 35 inlet~;
#X obj 324 35 inlet~;
#X obj 332 35 inlet~;
#X obj 960 193 any 1.71429 1.59945 1.28571 0.857143 0.428571 0.114836
;
#X obj 447 80 route ambi_weight mirror_weight HRIR_onset HRIR_pathname
HRIR_length;
#X msg 814 400 38 -90 0;
#X msg 712 684 38 L-90e000a.wav;
#X msg 776 515 8 L30e330a.wav \, 9 L30e270a.wav \, 10 L30e210a.wav
\, 11 L30e150a.wav \, 12 L30e090a.wav \, 13 L30e030a.wav;
#X msg 763 548 14 L10e000a.wav \, 15 L10e300a.wav \, 16 L10e240a.wav
\, 17 L10e180a.wav \, 18 L10e120a.wav \, 19 L10e060a.wav;
#X msg 750 582 20 L-10e330a.wav \, 21 L-10e270a.wav \, 22 L-10e210a.wav
\, 23 L-10e150a.wav \, 24 L-10e090a.wav \, 25 L-10e030a.wav;
#X msg 737 616 26 L-30e000a.wav \, 27 L-30e300a.wav \, 28 L-30e240a.wav
\, 29 L-30e180a.wav \, 30 L-30e120a.wav \, 31 L-30e060a.wav;
#X msg 724 650 32 L-40e328a.wav \, 33 L-40e270a.wav \, 34 L-40e212a.wav
\, 35 L-40e148a.wav \, 36 L-40e090a.wav \, 37 L-40e032a.wav;
#X obj 359 191 bng 15 250 50 0 empty empty empty 0 -6 0 8 -262144 -1
-1;
#X msg 789 479 2 L50e000a.wav \, 3 L50e300a.wav \, 4 L50e240a.wav \,
5 L50e180a.wav \, 6 L50e120a.wav \, 7 L50e060a.wav;
#X obj 347 264 bin_ambi_reduced_decode_control_fft2 \$0 L_HRIR HRTF_re
HRTF_im HRIR_fadeout_win Diffuse_Kemar_HRIR 0 5 3 38 0 \$1 2;
#X connect 2 0 73 0;
#X connect 3 0 73 1;
#X connect 4 0 73 2;
#X connect 5 0 73 3;
#X connect 6 0 73 4;
#X connect 7 0 73 5;
#X connect 8 0 73 6;
#X connect 10 0 73 7;
#X connect 11 0 73 8;
#X connect 12 0 73 9;
#X connect 13 0 73 10;
#X connect 14 0 73 11;
#X connect 15 0 73 12;
#X connect 16 0 73 13;
#X connect 17 0 73 14;
#X connect 18 0 73 15;
#X connect 19 0 0 0;
#X connect 20 0 1 0;
#X connect 21 0 73 16;
#X connect 22 0 73 17;
#X connect 23 0 73 18;
#X connect 24 0 73 19;
#X connect 25 0 73 20;
#X connect 26 0 73 21;
#X connect 27 0 73 22;
#X connect 28 0 73 23;
#X connect 29 0 73 24;
#X connect 31 0 86 0;
#X connect 39 0 45 0;
#X connect 41 0 71 0;
#X connect 41 1 71 0;
#X connect 41 2 44 0;
#X connect 41 3 96 2;
#X connect 41 4 96 3;
#X connect 41 5 45 1;
#X connect 42 0 41 5;
#X connect 43 0 39 0;
#X connect 45 0 69 0;
#X connect 45 1 71 0;
#X connect 46 0 47 0;
#X connect 47 0 73 37;
#X connect 49 0 40 0;
#X connect 51 0 54 0;
#X connect 52 0 88 0;
#X connect 52 1 93 0;
#X connect 52 2 92 0;
#X connect 52 3 91 0;
#X connect 52 4 90 0;
#X connect 52 5 89 0;
#X connect 52 6 95 0;
#X connect 52 7 53 0;
#X connect 52 8 87 0;
#X connect 52 9 68 0;
#X connect 52 10 66 0;
#X connect 52 11 64 0;
#X connect 52 12 63 0;
#X connect 52 13 65 0;
#X connect 52 14 67 0;
#X connect 52 15 51 0;
#X connect 53 0 55 0;
#X connect 54 0 96 5;
#X connect 55 0 96 7;
#X connect 56 0 43 0;
#X connect 57 0 54 0;
#X connect 58 0 54 0;
#X connect 59 0 54 0;
#X connect 60 0 54 0;
#X connect 61 0 54 0;
#X connect 62 0 54 0;
#X connect 63 0 59 0;
#X connect 64 0 60 0;
#X connect 65 0 58 0;
#X connect 66 0 61 0;
#X connect 67 0 57 0;
#X connect 68 0 62 0;
#X connect 69 0 70 0;
#X connect 70 0 49 0;
#X connect 71 0 96 0;
#X connect 73 0 19 0;
#X connect 73 0 20 0;
#X connect 73 1 19 1;
#X connect 73 1 20 1;
#X connect 74 0 73 25;
#X connect 75 0 73 26;
#X connect 76 0 73 27;
#X connect 77 0 73 28;
#X connect 78 0 73 29;
#X connect 79 0 73 30;
#X connect 80 0 73 31;
#X connect 81 0 73 32;
#X connect 82 0 73 33;
#X connect 83 0 73 34;
#X connect 84 0 73 35;
#X connect 86 0 41 0;
#X connect 86 1 41 1;
#X connect 86 2 41 2;
#X connect 86 3 41 3;
#X connect 86 4 41 4;
#X connect 87 0 54 0;
#X connect 88 0 55 0;
#X connect 89 0 55 0;
#X connect 90 0 55 0;
#X connect 91 0 55 0;
#X connect 92 0 55 0;
#X connect 93 0 55 0;
#X connect 94 0 71 0;
#X connect 95 0 55 0;
#X connect 96 0 73 36;
#X connect 96 1 52 0;
